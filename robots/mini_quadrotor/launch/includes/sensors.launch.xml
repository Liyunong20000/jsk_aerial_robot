<?xml version="1.0"?>
<launch>

  <arg name="real_machine" default="false" />
  <arg name="simulation" default="false" />
  <arg name="robot_ns" default="quadrotor" />

  <group ns="$(arg robot_ns)">
    <group if="$(arg real_machine)">
      <group unless="$(arg simulation)">
        <!-- fc & IMU & GPS -->
        <include file="$(find spinal)/launch/bridge.launch" >
          <arg name="mode" value="serial" />
          <arg name="serial_port" value="/dev/flight_controller" />
        </include>

        <!-- mocap -->
        <include file="$(find aerial_robot_base)/launch/external_module/mocap.launch" />

	<!-- m5stack -->
	<!-- <node pkg="rosserial_python" type="serial_node.py" name="m5stack_ros_node" output="screen" > -->
	<!--   <param name="port" value="/dev/m5stack_atom"/> -->
	<!-- </node> -->

	<!-- <!-\- realsense t265 -\-> -->
	<!-- <include file="$(find realsense2_camera)/launch/rs_t265.launch" /> -->

        <!-- livox mid360 -->
        <!-- <include file="$(find livox_ros_driver2)/launch_ROS1/msg_MID360.launch" /> -->
        <!-- <include file="$(find fast_lio)/launch/mapping_avia.launch" > -->
        <!--   <arg name="rviz" value="false" /> -->
        <!-- </include> -->

        <!-- usb camera -->
<!--        <node name="usb_cam" pkg="usb_cam" type="usb_cam_node" output="screen" >-->
<!--          <param name="video_device" value="/dev/video0" />-->
<!--          <param name="image_width" value="640" />-->
<!--          <param name="image_height" value="480" />-->
<!--          <param name="framerate" value="30.0" />-->
<!--          <param name="pixel_format" value="yuyv" />-->
<!--          <param name="color_format" value="yuv422p" />-->
<!--          <param name="camera_frame_id" value="$(arg robot_ns)/downward_camera_optical_frame" />-->
<!--          <param name="io_method" value="mmap"/>-->
<!--          <param name="camera_info_url" value="file://$(find mini_quadrotor)/camera_info/ELP-L100/480P/calibrationdata_1/ost.yaml" />-->
<!--          <remap from="usb_cam/image_raw" to= "downword_camera/image_raw"/>-->
<!--          <remap from="usb_cam/camera_info" to= "downword_camera/camera_info"/>-->
<!--        </node>-->

      </group>
    </group>

    <!-- basic configuration for sensors (e.g. noise sigma) -->
    <rosparam file="$(find aerial_robot_base)/config/sensors/imu/spinal.yaml" command="load" />
    <rosparam file="$(find aerial_robot_base)/config/sensors/mocap.yaml" command="load" />
    <!-- <rosparam file="$(find hydrus)/config/sensors/vo/realsense_t265.yaml" command="load" /> -->
    <rosparam file="$(find aerial_robot_base)/config/sensors/lio/livox_mid360.yaml" command="load" />
  </group>

</launch>
